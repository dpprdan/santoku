<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="santoku">
<title>What's new in santoku 0.9.0 • santoku</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="What's new in santoku 0.9.0">
<meta property="og:description" content="santoku">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">santoku</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/santoku.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/website-articles/performance.html">Performance</a>
    <a class="dropdown-item" href="../articles/whats-new-in-0-9-0.html">What's new in santoku 0.9.0</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../tutorials/00-visualintroduction.html">A visual introduction to Santoku</a>
    <a class="dropdown-item" href="../tutorials/01-chopping-dates.html">Chopping dates with santoku</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/hughjonesd/santoku/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>What's new in santoku 0.9.0</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hughjonesd/santoku/blob/HEAD/vignettes/whats-new-in-0-9-0.Rmd" class="external-link"><code>vignettes/whats-new-in-0-9-0.Rmd</code></a></small>
      <div class="d-none name"><code>whats-new-in-0-9-0.Rmd</code></div>
    </div>

    
    
<p>Santoku 0.9.0 has a few changes.</p>
<div class="section level2">
<h2 id="you-can-use-break-names-for-labels">You can use break names for labels<a class="anchor" aria-label="anchor" href="#you-can-use-break-names-for-labels"></a>
</h2>
<p>On the command line, sometimes you’d like to quickly add labels to
your breaks. Now, you can do this simply by adding names to the
<code>breaks</code> vector:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hughjonesd/santoku" class="external-link">santoku</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] [1, 3) [1, 3) [3, 5] [3, 5] [3, 5]</span></span>
<span><span class="co">#&gt; Levels: [1, 3) [3, 5]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Low <span class="op">=</span> <span class="fl">1</span>, High <span class="op">=</span> <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] Low  Low  High High High</span></span>
<span><span class="co">#&gt; Levels: Low High</span></span></code></pre></div>
<p>Break names override the <code>labels</code> argument, but you can
still use this for unnamed breaks:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">12</span><span class="op">:</span><span class="fl">80</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/chop.html">tab</a></span><span class="op">(</span><span class="va">ages</span>, </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Under 16"</span> <span class="op">=</span> <span class="fl">0</span>, <span class="fl">16</span>, <span class="fl">25</span>, <span class="fl">35</span>, <span class="fl">45</span>, <span class="fl">55</span>, <span class="st">"65 and over"</span> <span class="op">=</span> <span class="fl">65</span><span class="op">)</span>, </span>
<span>      labels <span class="op">=</span> <span class="fu"><a href="../reference/lbl_discrete.html">lbl_discrete</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt;    Under 16       16—24       25—34       35—44       45—54       55—64 </span></span>
<span><span class="co">#&gt;           1           1           2           3           3           4 </span></span>
<span><span class="co">#&gt; 65 and over </span></span>
<span><span class="co">#&gt;           6</span></span></code></pre></div>
<p>Names can also be used for labels in <code><a href="../reference/chop_quantiles.html">chop_quantiles()</a></code>
and <code><a href="../reference/chop_proportions.html">chop_proportions()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">chopped</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chop_quantiles.html">chop_quantiles</a></span><span class="op">(</span><span class="va">x</span>, </span>
<span>                            <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lower tail"</span> <span class="op">=</span> <span class="fl">0</span>, <span class="fl">0.025</span>, <span class="st">"Upper tail"</span> <span class="op">=</span> <span class="fl">0.975</span><span class="op">)</span></span>
<span>                          <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">chopped</span><span class="op">)</span></span>
<span><span class="co">#&gt;             x       chopped</span></span>
<span><span class="co">#&gt; 1  -1.3888607 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 2  -0.2787888 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 3  -0.1333213 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 4   0.6359504 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 5  -0.2842529 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 6  -2.6564554    Lower tail</span></span>
<span><span class="co">#&gt; 7  -2.4404669 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 8   1.3201133    Upper tail</span></span>
<span><span class="co">#&gt; 9  -0.3066386 [2.5%, 97.5%)</span></span>
<span><span class="co">#&gt; 10 -1.7813084 [2.5%, 97.5%)</span></span></code></pre></div>
<p>This feature is experimental for now.</p>
</div>
<div class="section level2">
<h2 id="close_end-works-differently">
<code>close_end</code> works differently<a class="anchor" aria-label="anchor" href="#close_end-works-differently"></a>
</h2>
<p>The <code>close_end</code> parameter is used to right-close the last
break. This used to be applied before breaks were extended to cover
items beyond the explicitly given breaks. We think this was confusing
for users. So now, <code>close_end</code> is applied only after the
breaks have been extended - i.e. to the very last break.</p>
<p>In 0.8.0:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, close_end <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] [1, 2) [2, 3] [2, 3] (3, 4]</span></span>
<span><span class="co">#&gt; Levels: [1, 2) [2, 3] (3, 4]</span></span></code></pre></div>
<p>Notice how the central break <code>[2, 3]</code> is right-closed.
(The extended break <code>[3, 4]</code> is right-closed too, because
extended breaks are always closed at the “outer” end.)</p>
<p>In 0.9.0:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, close_end <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] [1, 2) [2, 3) [3, 4] [3, 4]</span></span>
<span><span class="co">#&gt; Levels: [1, 2) [2, 3) [3, 4]</span></span></code></pre></div>
<p>Now, <code>close_end</code> is applied to the final, extended break
<code>[3, 4]</code>, not to the explicit break <code>[2, 3)</code>.</p>
</div>
<div class="section level2">
<h2 id="close_end-is-true-by-default">
<code>close_end</code> is <code>TRUE</code> by default<a class="anchor" aria-label="anchor" href="#close_end-is-true-by-default"></a>
</h2>
<p>We think that for exploratory work, users typically want to include
all the data between the lowest and highest break, inclusive. So,
<code>close_end</code> is now <code>TRUE</code> by default.</p>
<p>In 0.8.0:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] [1, 2) [2, 3) {3}   </span></span>
<span><span class="co">#&gt; Levels: [1, 2) [2, 3) {3}</span></span></code></pre></div>
<p>In 0.9.0:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chop.html">chop</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] [1, 2) [2, 3] [2, 3]</span></span>
<span><span class="co">#&gt; Levels: [1, 2) [2, 3]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="new-raw-parameter-for-chop">New <code>raw</code> parameter for <code>chop()</code><a class="anchor" aria-label="anchor" href="#new-raw-parameter-for-chop"></a>
</h2>
<p><code>lbl_*</code> functions have a <code>raw</code> parameter to use
the raw interval endpoints in labels, rather than e.g. percentiles or
standard deviations. We’ve moved this into the main <code><a href="../reference/chop.html">chop()</a></code>
function. This makes it easier to use:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/chop_mean_sd.html">chop_mean_sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] [-1 sd, 0 sd)  [0 sd, 1 sd)   [0 sd, 1 sd)   [1 sd, 2 sd)   [0 sd, 1 sd)  </span></span>
<span><span class="co">#&gt;  [6] [-2 sd, -1 sd) [-2 sd, -1 sd) [1 sd, 2 sd)   [0 sd, 1 sd)   [-1 sd, 0 sd) </span></span>
<span><span class="co">#&gt; Levels: [-2 sd, -1 sd) [-1 sd, 0 sd) [0 sd, 1 sd) [1 sd, 2 sd)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/chop_mean_sd.html">chop_mean_sd</a></span><span class="op">(</span><span class="va">x</span>, raw <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] [-2.03, -0.7314)  [-0.7314, 0.5674) [-0.7314, 0.5674) [0.5674, 1.866)  </span></span>
<span><span class="co">#&gt;  [5] [-0.7314, 0.5674) [-3.329, -2.03)   [-3.329, -2.03)   [0.5674, 1.866)  </span></span>
<span><span class="co">#&gt;  [9] [-0.7314, 0.5674) [-2.03, -0.7314) </span></span>
<span><span class="co">#&gt; 4 Levels: [-3.329, -2.03) [-2.03, -0.7314) ... [0.5674, 1.866)</span></span></code></pre></div>
<p>The <code>raw</code> parameter to <code>lbl_*</code> functions is
deprecated.</p>
</div>
<div class="section level2">
<h2 id="other-changes">Other changes<a class="anchor" aria-label="anchor" href="#other-changes"></a>
</h2>
<p>The NEWS file lists other changes, including a new
<code><a href="../reference/chop_fn.html">chop_fn()</a></code> function which creates breaks using any arbitrary
function.</p>
</div>
<div class="section level2">
<h2 id="feedback">Feedback<a class="anchor" aria-label="anchor" href="#feedback"></a>
</h2>
<p>We expect this to be the last release before 1.0, when we’ll
stabilize the interface and move santoku from “experimental” to
“stable”. So, if you have problems or suggestions regarding any of these
changes, please <a href="https://github.com/hughjonesd/santoku/issues" class="external-link">file an
issue</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Hugh-Jones.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
